<?xml version="1.0" encoding="utf-8" ?>
<elements>
  <info>
    <name>Singer of the Abyss</name>
    <update version="0.0.1">
      <file name="subclass-sorcerer-singeroftheabyss.xml" url="https://github.com/bundythegrim/aurorabuilder-homebrew/blob/main/sorcerer-singeroftheabyss.xml" />
    </update>
  </info>

  <element name="Singer(Blade) of the Abyss" type="Archetype" source="Crown of Kings Homebrew" id="ID_HOMEBREW_CK_ARCHETYPE_SINGEROFTHEABYSS">
    <supports>Sorcerous Origin</supports>
    <description>
      <p>A Singer of the Abyss has the blood of a hero coursing through their veins. Perhaps they were born with the blood of the gods or an extraordinary hero of the past. Perhaps you were touched by a powerful artifact or born in the presence of a greater being. Regardless of how you got your abilities you are innately proficient with magic and the blade.</p>
      <div element="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORM_MAGIC" />
      <div element="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_SOULBLADE" />
      <div element="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_ABYSSALSONG" />
      <div element="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORM_DEFENSES" />
      <div element="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORMS_FURY" />
      <div element="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_WIND_SOUL" />
    </description>
    <sheet display="false">
      <description>Your innate magic comes from the power of the Abyss.</description>
    </sheet>
    <rules>
      <grant type="Archetype Feature" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORM_MAGIC" level="1"/>
      <grant type="Archetype Feature" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_SOULBLADE" level="1"/>
      <grant type="Archetype Feature" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_ABYSSALSONG" level="1"/>
      <grant type="Archetype Feature" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORM_DEFENSES" level="6"/>
      <grant type="Archetype Feature" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORMS_FURY" level="14"/>
      <grant type="Archetype Feature" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_WIND_SOUL" level="18"/>
    </rules>
  </element>
  <element name="Storm Magic" type="Archetype Feature" source="Crown of Kings Homebrew" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORM_MAGIC">
    <description>
      <p>
        <em>1st-level Singer of the Abyss feature</em>
      </p>
      <p>You learn additional spells when you reach certain levels in this class, as shown on the Storm Spells table. Each spell counts as a sorcerer spell for you, but it doesn’t count against the number of sorcerer spells you know.</p>
      <p>Whenever you gain a sorcerer level, you can replace one spell you gained from this feature with another spell of the same level. The new spell must be a conjuration or an evocation spell from the sorcerer, warlock or wizard spell list, but will no longer work with your Electron Sorcery feature.</p>
      <h5 class="caption">Storm(Primordial, Abyssal, Chaotic) Spells</h5>
      <table>
        <thead>
          <tr><td>Sorcerer Level</td><td>Spells</td></tr>
        </thead>
        <tr><td>1st</td><td><em>fog cloud, thunderwave</em></td></tr>
        <tr><td>3rd</td><td><em>gust of wind, levitate</em></td></tr>
        <tr><td>5th</td><td><em>lightning bolt, thunder step</em></td></tr>
        <tr><td>7th</td><td><em>strom sphere, watery sphere</em></td></tr>
        <tr><td>9th</td><td><em>destructive wave, wrath of nature</em></td></tr>
      </table>
    </description>
    <sheet display="false" />
    <rules>
      <grant type="Spell" id="ID_PHB_SPELL_FOG_CLOUD" level="1" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_PHB_SPELL_THUNDERWAVE" level="1" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_PHB_SPELL_GUST_OF_WIND" level="3" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_PHB_SPELL_LEVITATE" level="3" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_PHB_SPELL_LIGHTNING_BOLT" level="5" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_XGTE_SPELL_THUNDER_STEP" level="5" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_XGTE_SPELL_STORM_SPHERE" level="7" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_XGTE_SPELL_WATERY_SPHERE" level="7" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_PHB_SPELL_DESTRUCTIVE_WAVE" level="9" spellcasting="Sorcerer" />
      <grant type="Spell" id="ID_XGTE_SPELL_WRATH_OF_NATURE" level="9" spellcasting="Sorcerer" />
    </rules>
  </element>
  <element name="Soul-Blade" type="Archetype Feature" source="Crown of Kings Homebrew" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_SOULBLADE">
    <description>
      <p>
        <em>1st-level Singer of the Abyss feature</em>
      </p>
      <p>As a Singer of the Abyss you've been naturally gifted in combat. You've learned to manifest your abilities to create a one-handed melee weapon known as your Soul-Blade. You gain proficiency with this weapon while wielding it. While wielding your Soul-Blade you cannot wield any additional weapons. Additionally your Soul-Blade can be used as your arcane focus and you gain proficiency in light armor.</p>
    </description>
    <sheet>
      <description>As a Singer of the Abyss you've been naturally gifted in combat. You've learned to manifest your abilities to create a one-handed melee weapon known as your Soul-Blade. You gain proficiency with this weapon while wielding it. While wielding your Soul-Blade you cannot wield any additional weapons. Additionally your Soul-Blade can be used as your arcane focus and you gain proficiency in light armor.</description>
    </sheet>
  </element>
  <element name="Abyssal Song" type="Archetype Feature" source="Crown of Kings Homebrew" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_ABYSSALSONG">
    <description>
      <p>
        <em>1st-level Singer of the Abyss feature</em>
      </p>
      <p>You can invoke a secret abyssal magic called the Abyssal Song, provided that you aren’t wearing medium or heavy armor or using a shield. It graces you with supernatural speed, agility, and focus.</p>
      <p class="indent">You can use a bonus action to start the Bladesong, which lasts for 1 minute. It ends early if you are incapacitated, if you don medium or heavy armor or a shield, or if you use two hands to make an attack with a weapon. You can also dismiss the Bladesong at any time (no action required).</p>
      <p class="indent">While your Bladesong is active, you gain the following benefits:</p>
      <ul>
        <li>You gain a bonus to your AC equal to your Charisma modifier (minimum of +1)</li>
        <li>Your walking speed increases by 10 feet.</li>
        <li>You have advantage on Dexterity (Acrobatics) checks.</li>
        <li>You gain a bonus to any Constitution saving throw you make to maintain your concentration on a spell. The bonus equals your Intelligence modifier (minimum of +1).</li>
      </ul>
      <p class="indent">You can use this feature a number of times equal to your proficiency bonus, and you regain all expended uses of it when you finish a long rest.</p>
    </description>
    <sheet usage="2/Short Rest">
      <description>You can use a bonus action to start the Bladesong, which lasts for 1 minute. +{{songoftheabyss:charisma}} AC, +10 walking speed, advantage on Acrobatics checks, +{{songoftheabyss:charisma}} to concentration checks.</description>
    </sheet>
    <rules>
      <stat name="songoftheabyss:charisma" value="1" bonus="songoftheabyss" />
      <stat name="songoftheabyss:charisma" value="charisma:modifier" bonus="songoftheabyss" />
    </rules>
  </element>
  <element name="Storm Defenses" type="Archetype Feature" source="Crown of Kings Homebrew" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORM_DEFENSES">
    <description>
      <p>
        <em>6th-level Singer of the Abyss feature</em>
      </p>
      <p>You gain resistance to lightning and thunder damage, and you have advantage on saving throws against being stunned or blinded. In addition, whenever you start casting a spell of 1st level or higher that deals lightning or thunder damage, stormy magic erupts from you. This eruption causes creatures of your choice that you can see within 10 feet of you to take lightning or thunder damage (choose each time this ability activates) equal to half your sorcerer level.</p>
    </description>
    <sheet>
      <description>Whenever you start casting a spell of 1st level or higher that deals lightning or thunder damage. Creatures of your choice that you can see within 10 feet of you to take {{level:sorcerer:half}} lightning or thunder damage.</description>
    </sheet>
    <rules>
      <grant type="Condition" id="ID_INTERNAL_CONDITION_DAMAGE_RESISTANCE_LIGHTNING" />
      <grant type="Condition" id="ID_INTERNAL_CONDITION_DAMAGE_RESISTANCE_THUNDER" />
    </rules>
  </element>
  <element name="Storm’s Fury" type="Archetype Feature" source="Crown of Kings Homebrew" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_STORMS_FURY">
    <description>
      <p>
        <em>14th-level Singer of the Abyss feature</em>
      </p>
      <p>When you are hit by a melee attack, you can use your reaction to deal lightning damage to the attacker. The damage equals your sorcerer level. The attacker must also make a Strength saving throw against your sorcerer spell save DC. On a failed save, the attacker is pushed in a straight line up to 20 feet away from you.</p>
    </description>
    <sheet action="Reaction">
      <description>When you are hit by a melee attack, you can use your reaction to deal {{level:sorcerer}} lightning damage to the attacker. The attacker must also make a DC{{spellcasting:dc:cha}} Strength saving throw. On a failed save, the attacker is pushed in a straight line up to 20 feet away from you.</description>
    </sheet>
  </element>
  <element name="Wind Soul" type="Archetype Feature" source="Crown of Kings Homebrew" id="ID_HOMEBREW_CK_ARCHETYPE_FEATURE_SINGEROFTHEABYSS_WIND_SOUL">
    <description>
      <p>
        <em>18th-level Singer of the Abyss feature</em>
      </p>
      <p>You gain immunity to lightning and thunder damage.</p>
      <p class="indent">You also gain a magical flying speed of 60 feet. As an action, you can reduce your flying speed to 30 feet for 1 hour and choose a number of creatures within 30 feet of you equal to 3 + your Charisma modifier. The chosen creatures gain a magical flying speed of 30 feet for 1 hour. Once you reduce your flying speed in this way, you can't do so again until you finish a short or long rest.</p>
    </description>
    <sheet>
      <description>You gain a magical flying speed of 60 feet. As an action, you can reduce your flying speed to 30 feet for 1 hour and choose {{wind soul:creatures}} creatures within 30 feet of you that gain a magical flying speed of 30 feet for 1 hour. (1/LR)</description>
    </sheet>
    <rules>
      <stat name="speed:fly" value="60" bonus="base" />
      <stat name="wind soul:creatures" value="3" bonus="wind soul" />
      <stat name="wind soul:creatures" value="charisma:modifier" bonus="wind soul" />
      <grant type="Condition" id="ID_INTERNAL_CONDITION_DAMAGE_IMMUNITY_LIGHTNING" />
      <grant type="Condition" id="ID_INTERNAL_CONDITION_DAMAGE_IMMUNITY_THUNDER" />
    </rules>
  </element>
</elements>
